# /app/docker/pythonpath/superset_config_docker.py

BABEL_DEFAULT_LOCALE = "fr"

LANGUAGES = {
    "fr": {"flag": "fr", "name": "French"},
}

FAVICONS = [{"href": "/static/assets/dsfr/favicon/favicon.svg"}]
LOGO_TOOLTIP = "Superset"
APP_NAME = "Superset"

# Specify the App icon
APP_ICON = "/static/assets/local/images/app_icon.png"

DSFR_COLORS = {
  "sun": {
    "grey-1000-50": "#fff",
    "grey-975-75": "#f6f6f6",
    "grey-950-100": "#eee",
    "grey-200-850": "#3a3a3a",
    "grey-925-125": "#e5e5e5",
    "grey-1000-75": "#fff",
    "grey-1000-100": "#fff",
    "grey-975-100": "#f6f6f6",
    "grey-975-125": "#f6f6f6",
    "grey-950-125": "#eee",
    "grey-950-150": "#eee",
    "grey-50-1000": "#161616",
    "grey-425-625": "#666",
    "grey-625-425": "#929292",
    "grey-0-1000": "#000",
    "grey-900-175": "#ddd",
    "blue-france-975-75": "#f5f5fe",
    "blue-france-950-100": "#ececfe",
    "blue-france-sun-113-625": "#000091",
    "blue-france-925-125": "#e3e3fd",
    "blue-france-975-sun-113": "#f5f5fe",
    "blue-france-main-525": "#6a6af4",
    "blue-france-850-200": "#cacafb",
    "info-950-100": "#e8edff",
    "info-950-100-hover": "#c2d1ff",
    "info-950-100-active": "#a9bfff",
    "info-425-625": "#0063cb",
    "info-425-625-hover": "#3b87ff",
    "info-425-625-active": "#6798ff",
    "info-975-75": "#f4f6ff",
    "success-950-100": "#b8fec9",
    "success-950-100-hover": "#46fd89",
    "success-950-100-active": "#34eb7b",
    "success-425-625": "#18753c",
    "success-425-625-hover": "#27a959",
    "success-425-625-active": "#2fc368",
    "success-975-75": "#dffee6",
    "warning-950-100": "#ffe9e6",
    "warning-950-100-hover": "#ffc6bd",
    "warning-950-100-active": "#ffb0a2",
    "warning-425-625": "#b34000",
    "warning-425-625-hover": "#ff6218",
    "warning-425-625-active": "#ff7a55",
    "warning-975-75": "#fff4f3",
    "error-950-100": "#ffe9e9",
    "error-950-100-hover": "#ffc5c5",
    "error-950-100-active": "#ffafaf",
    "error-425-625": "#ce0500",
    "error-425-625-hover": "#ff2725",
    "error-425-625-active": "#ff4140",
    "error-975-75": "#fff4f4",
    "green-tilleul-verveine-975-75": "#fef7da",
    "green-tilleul-verveine-sun-418-moon-817": "#66673d",
    "green-tilleul-verveine-925-125": "#fbe769",
    "green-bourgeon-sun-425-moon-759": "#447049",
    "green-emeraude-sun-425-moon-753": "#297254",
    "green-menthe-sun-373-moon-652": "#37635f",
    "green-archipel-sun-391-moon-716": "#006a6f",
    "blue-ecume-sun-247-moon-675": "#2f4077",
    "blue-cumulus-sun-368-moon-732": "#3558a2",
    "purple-glycine-sun-319-moon-630": "#6e445a",
    "pink-macaron-sun-406-moon-833": "#8d533e",
    "pink-tuile-sun-425-moon-750": "#a94645",
    "yellow-tournesol-sun-407-moon-922": "#716043",
    "yellow-moutarde-sun-348-moon-860": "#695240",
    "orange-terre-battue-sun-370-moon-672": "#755348",
    "brown-cafe-creme-sun-383-moon-885": "#685c48",
    "brown-caramel-sun-425-moon-901": "#845d48",
    "brown-opera-sun-395-moon-820": "#745b47",
    "beige-gris-galet-sun-407-moon-821": "#6a6156",
  },
  "moon": {
    "grey-1000-50": "#161616",
    "grey-975-75": "#1e1e1e",
    "grey-950-100": "#242424",
    "grey-200-850": "#cecece",
    "grey-925-125": "#2a2a2a",
    "grey-1000-75": "#1e1e1e",
    "grey-1000-100": "#242424",
    "grey-975-100": "#242424",
    "grey-975-125": "#2a2a2a",
    "grey-950-125": "#2a2a2a",
    "grey-950-150": "#2f2f2f",
    "grey-50-1000": "#fff",
    "grey-425-625": "#929292",
    "grey-625-425": "#666",
    "grey-0-1000": "#fff",
    "grey-900-175": "#353535",
    "blue-france-975-75": "#1b1b35",
    "blue-france-950-100": "#21213f",
    "blue-france-sun-113-625": "#8585f6",
    "blue-france-925-125": "#272747",
    "blue-france-975-sun-113": "#000091",
    "blue-france-main-525": "#6a6af4",
    "blue-france-850-200": "#313178",
    "info-950-100": "#1d2437",
    "info-425-625": "#518fff",
    "success-950-100": "#19271d",
    "success-425-625": "#27a658",
    "warning-950-100": "#361e19",
    "warning-425-625": "#fc5d00",
    "error-950-100": "#391c1c",
    "error-425-625": "#ff5655",
    "green-tilleul-verveine-975-75": "#201e14",
    "green-tilleul-verveine-sun-418-moon-817": "#d8c634",
    "green-tilleul-verveine-925-125": "#2d2a1d",
    "green-bourgeon-sun-425-moon-759": "#99c221",
    "green-emeraude-sun-425-moon-753": "#34cb6a",
    "green-menthe-sun-373-moon-652": "#21ab8e",
    "green-archipel-sun-391-moon-716": "#34bab5",
    "blue-ecume-sun-247-moon-675": "#869ece",
    "blue-cumulus-sun-368-moon-732": "#7ab1e8",
    "purple-glycine-sun-319-moon-630": "#ce70cc",
    "pink-macaron-sun-406-moon-833": "#ffb7ae",
    "pink-tuile-sun-425-moon-750": "#ff9575",
    "yellow-tournesol-sun-407-moon-922": "#ffe552",
    "yellow-moutarde-sun-348-moon-860": "#ffca00",
    "orange-terre-battue-sun-370-moon-672": "#ff732c",
    "brown-cafe-creme-sun-383-moon-885": "#ecd7a2",
    "brown-caramel-sun-425-moon-901": "#fbd8ab",
    "brown-opera-sun-395-moon-820": "#e6be92",
    "beige-gris-galet-sun-407-moon-821": "#d0c3b7",
  },
}

# THEME_OVERRIDES is used for adding custom theme to superset
# pour le theme par default voir superset-frontend/packages/superset-ui-core/src/style/index.tsx
# https://preset.io/blog/theming-superset-progress-update/
# [SIP-82] Improving Superset Theming https://github.com/apache/superset/issues/20159
# https://www.systeme-de-design.gouv.fr/elements-d-interface/fondamentaux-de-l-identite-de-l-etat/couleurs-palette
THEME_OVERRIDES = {
    "borderRadius": 5,
    "colors": {
        "text": {
            "label": DSFR_COLORS["sun"]["grey-425-625"],
            "help": DSFR_COLORS["sun"]["grey-425-625"],
        },
        "primary": {
            "base": DSFR_COLORS["sun"]["blue-france-sun-113-625"],
            "dark1": DSFR_COLORS["sun"]["blue-france-sun-113-625"],
            "dark2": DSFR_COLORS["sun"]["blue-france-sun-113-625"],
            "light1": DSFR_COLORS["sun"]["blue-france-main-525"],
            "light2": DSFR_COLORS["sun"]["blue-france-850-200"],
            "light3": DSFR_COLORS["sun"]["blue-france-925-125"],
            "light4": DSFR_COLORS["sun"]["blue-france-950-100"],
            "light5": DSFR_COLORS["sun"]["blue-france-975-75"],
        },
        "secondary": {
            "base": DSFR_COLORS["sun"]["blue-france-sun-113-625"], 
            "dark1": DSFR_COLORS["sun"]["grey-0-1000"], 
            "dark2": DSFR_COLORS["sun"]["blue-france-sun-113-625"], 
            "dark3": DSFR_COLORS["sun"]["blue-france-sun-113-625"],
            "light1": DSFR_COLORS["sun"]["blue-france-sun-113-625"],
            "light2": DSFR_COLORS["sun"]["blue-france-sun-113-625"],
            "light3": DSFR_COLORS["sun"]["blue-france-sun-113-625"],
            "light4": DSFR_COLORS["sun"]["blue-france-925-125"],
            "light5": DSFR_COLORS["sun"]["blue-france-925-125"],
        },
        "grayscale": {
            "base": DSFR_COLORS["sun"]["grey-425-625"],
            "dark1": DSFR_COLORS["sun"]["grey-200-850"],
            "dark2": DSFR_COLORS["sun"]["grey-50-1000"],
            "light1": DSFR_COLORS["sun"]["grey-625-425"],
            "light2": DSFR_COLORS["sun"]["grey-925-125"],
            "light3": DSFR_COLORS["sun"]["grey-950-100"],
            "light4": DSFR_COLORS["sun"]["grey-975-75"],
            "light5": DSFR_COLORS["sun"]["grey-1000-50"],
        },
        "error": {
            "base": DSFR_COLORS["sun"]["error-425-625"],
            "dark1": DSFR_COLORS["sun"]["error-425-625"],
            "dark2": DSFR_COLORS["sun"]["grey-0-1000"],
            "light1": DSFR_COLORS["sun"]["error-425-625"], 
            "light2": DSFR_COLORS["sun"]["error-950-100"],
        },
        "warning": {
            "base": DSFR_COLORS["sun"]["warning-425-625"],
            "dark1": DSFR_COLORS["sun"]["warning-425-625"],
            "dark2": DSFR_COLORS["sun"]["grey-0-1000"],
            "light1": DSFR_COLORS["sun"]["warning-425-625"],
            "light2": DSFR_COLORS["sun"]["warning-950-100"],
        },
        "alert": {
            "base": DSFR_COLORS["sun"]["green-tilleul-verveine-925-125"],
            "dark1": DSFR_COLORS["sun"]["green-tilleul-verveine-925-125"],
            "dark2": DSFR_COLORS["sun"]["grey-0-1000"],
            "light1": DSFR_COLORS["sun"]["green-tilleul-verveine-925-125"],
            "light2": DSFR_COLORS["sun"]["green-tilleul-verveine-975-75"],
        },
        "success": {
            "base": DSFR_COLORS["sun"]["success-425-625"],
            "dark1": DSFR_COLORS["sun"]["success-425-625"],
            "dark2": DSFR_COLORS["sun"]["grey-0-1000"],
            "light1": DSFR_COLORS["sun"]["success-425-625"],
            "light2": DSFR_COLORS["sun"]["success-950-100"],
        },
        "info": {
            "base": DSFR_COLORS["sun"]["info-425-625"],
            "dark1": DSFR_COLORS["sun"]["info-425-625"],
            "dark2": DSFR_COLORS["sun"]["grey-0-1000"],
            "light1": DSFR_COLORS["sun"]["info-425-625"],
            "light2": DSFR_COLORS["sun"]["info-950-100"],
        },
    },
    "typography": {
        "families": {
            "sansSerif": "Marianne, Inter, Helvetice, Arial",
            "serif": "Marianne, Georgia, Times New Roman, Times, serif",
            "monospace": "Marianne, Fira Code, Courier New, monospace",
        },
    },
}

# EXTRA_CATEGORICAL_COLOR_SCHEMES is used for adding custom categorical color schemes
# see DSFR colors "Couleurs illustratives"
# https://preset.io/blog/customizing-chart-colors-with-superset-and-preset/#creating-custom-color-palettes
# https://gouvernementfr.github.io/dsfr-chart/#colors
EXTRA_CATEGORICAL_COLOR_SCHEMES = [
    {
        "id": "dsfr_sun",
        "description": "Couleurs illustratives du DSFR (thème clair)",
        "label": "DSFR (thème clair)",
        "isDefault": True,
        "colors": [
            DSFR_COLORS["sun"]["green-bourgeon-sun-425-moon-759"],
            DSFR_COLORS["sun"]["blue-ecume-sun-247-moon-675"],
            DSFR_COLORS["sun"]["purple-glycine-sun-319-moon-630"],
            DSFR_COLORS["sun"]["pink-macaron-sun-406-moon-833"],
            DSFR_COLORS["sun"]["yellow-tournesol-sun-407-moon-922"],
            DSFR_COLORS["sun"]["orange-terre-battue-sun-370-moon-672"],
            DSFR_COLORS["sun"]["brown-cafe-creme-sun-383-moon-885"],
            DSFR_COLORS["sun"]["beige-gris-galet-sun-407-moon-821"],
            DSFR_COLORS["sun"]["green-emeraude-sun-425-moon-753"],
            DSFR_COLORS["sun"]["blue-cumulus-sun-368-moon-732"],
            DSFR_COLORS["sun"]["pink-tuile-sun-425-moon-750"],
            DSFR_COLORS["sun"]["yellow-moutarde-sun-348-moon-860"],
            DSFR_COLORS["sun"]["brown-caramel-sun-425-moon-901"],
            DSFR_COLORS["sun"]["green-menthe-sun-373-moon-652"],
            DSFR_COLORS["sun"]["brown-opera-sun-395-moon-820"],
            DSFR_COLORS["sun"]["green-archipel-sun-391-moon-716"],
            DSFR_COLORS["sun"]["green-tilleul-verveine-sun-418-moon-817"],
        ],
    },
    {
        "id": "dsfr_moon",
        "description": "Couleurs illustratives du DSFR (thème sombre)",
        "label": "DSFR (thème sombre)",
        "isDefault": False,
        "colors": [
            DSFR_COLORS["moon"]["green-bourgeon-sun-425-moon-759"],
            DSFR_COLORS["moon"]["blue-ecume-sun-247-moon-675"],
            DSFR_COLORS["moon"]["purple-glycine-sun-319-moon-630"],
            DSFR_COLORS["moon"]["pink-macaron-sun-406-moon-833"],
            DSFR_COLORS["moon"]["yellow-tournesol-sun-407-moon-922"],
            DSFR_COLORS["moon"]["orange-terre-battue-sun-370-moon-672"],
            DSFR_COLORS["moon"]["brown-cafe-creme-sun-383-moon-885"],
            DSFR_COLORS["moon"]["beige-gris-galet-sun-407-moon-821"],
            DSFR_COLORS["moon"]["green-emeraude-sun-425-moon-753"],
            DSFR_COLORS["moon"]["blue-cumulus-sun-368-moon-732"],
            DSFR_COLORS["moon"]["pink-tuile-sun-425-moon-750"],
            DSFR_COLORS["moon"]["yellow-moutarde-sun-348-moon-860"],
            DSFR_COLORS["moon"]["brown-caramel-sun-425-moon-901"],
            DSFR_COLORS["moon"]["green-menthe-sun-373-moon-652"],
            DSFR_COLORS["moon"]["brown-opera-sun-395-moon-820"],
            DSFR_COLORS["moon"]["green-archipel-sun-391-moon-716"],
            DSFR_COLORS["moon"]["green-tilleul-verveine-sun-418-moon-817"],
        ],
    },
]
3
def make_description(color_name):
    try:
        cut_index = color_name.index("sun")
        formatted_color_name = color_name[:cut_index].replace('-', ' ')
        return formatted_color_name.title()
    except ValueError:
        return color_name.title().replace('-', ' ')

# EXTRA_SEQUENTIAL_COLOR_SCHEMES is used for adding custom sequential color schemes
EXTRA_SEQUENTIAL_COLOR_SCHEMES = [
    {
        "id": colorname,
        "description": make_description(colorname),
        "isDiverging": True,
        "label": make_description(colorname),
        "isDefault": False,
        "colors": [
            DSFR_COLORS["sun"]["grey-950-100"], 
            DSFR_COLORS["sun"][colorname],
        ],
    }
    for colorname in [
          "green-bourgeon-sun-425-moon-759",
          "blue-ecume-sun-247-moon-675",
          "purple-glycine-sun-319-moon-630",
          "pink-macaron-sun-406-moon-833",
          "yellow-tournesol-sun-407-moon-922",
          "orange-terre-battue-sun-370-moon-672",
          "brown-cafe-creme-sun-383-moon-885",
          "beige-gris-galet-sun-407-moon-821",
          "green-emeraude-sun-425-moon-753",
          "blue-cumulus-sun-368-moon-732",
          "pink-tuile-sun-425-moon-750",
          "yellow-moutarde-sun-348-moon-860",
          "brown-caramel-sun-425-moon-901",
          "green-menthe-sun-373-moon-652",
          "brown-opera-sun-395-moon-820",
          "green-archipel-sun-391-moon-716",
          "green-tilleul-verveine-sun-418-moon-817",
        ]
]
EXTRA_SEQUENTIAL_COLOR_SCHEMES[0]["isDefault"] = True

# Do you want Talisman enabled?
TALISMAN_ENABLED = False

# If you want Talisman, how do you want it configured??
TALISMAN_CONFIG = {
    "content_security_policy": {
        "default-src": ["'self'"],
        "img-src": ["'self'", "data:"],
        "worker-src": ["'self'", "blob:"],
        "connect-src": [
            "'self'",
            "https://api.mapbox.com",
            "https://events.mapbox.com",
        ],
        "object-src": "'none'",
        "style-src": ["'self'", "'unsafe-inline'"],
        "script-src": ["'self'", "'unsafe-eval'"],
    },
    "content_security_policy_nonce_in": ["script-src"],
    "force_https": False,
}

# Sanitizes the HTML content used in markdowns to allow its rendering in a safe manner.
# Disabling this option is not recommended for security reasons. If you wish to allow
# valid safe elements that are not included in the default sanitization schema, use the
# HTML_SANITIZATION_SCHEMA_EXTENSIONS configuration.
HTML_SANITIZATION = False

# Use this configuration to extend the HTML sanitization schema.
# By default we use the GitHub schema defined in
# https://github.com/syntax-tree/hast-util-sanitize/blob/main/lib/schema.js
# For example, the following configuration would allow the rendering of the
# style attribute for div elements and the ftp protocol in hrefs:
HTML_SANITIZATION_SCHEMA_EXTENSIONS = {
  "ancestors": {
    "tbody": ["table"],
	"td": ["table"],
	"th": ["table"],
	"thead": ["table"],
	"tfoot": ["table"],
	"tr": ["table"]
  },
  "tagNames": ["button", "svg", "use", "span"],
  "attributes": {
    "div": ["style"],
    "button": ["class", "id", "aria-desribedby"],
    "*": ["style","className"],
	"svg": ["viewBox"],
	"use": ["href"],
  },
  "strip": ["script"],
  "protocols": {
    "href": ["ftp"],
  }
}
